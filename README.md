# delivery-service

**주요 개발 환경**
- java 17  
- Spring Boot 
- Gradle 7.4

-------------------------

**요구 사항**
- 회원가입 기능
- 토큰 인증 기반 로그인 기능
- 사용자 배달 조회 기능
- 사용자 배달 도착지 정보 수정 기능

-------------------------

**요구 사항 상세 내용 정리**
- 배달 조회는 최대 3일 전까지 가능하다
  - 배달 조회는 주문 시각을 기준으로 한다
- 배달 수령지는 준비 상태에만 변경가능 하다
  - 배달 상태값은 준비, 배달기사배정, 시작, 완료의 상태를 가진다
- 하나의 배달은 하나의 주문을 가지고 있다 / 반대로, 하나의 주문 또한 하나의 배달을 가지고 있다
- 배달은 담당 기사, 수령지, 상태, 배송 메모 등 배달하기 위해 필요한 정보만을 가지고 있다
  - 나머지 주문에 대한 정보 등은 주문을 참조하여 알 수 있다

-------------------------

**논외**
- 주문에 대한 상세 기능
- 배달 상태 값을 변경하는 측(판매자?)의 모든 기능
- 배달 요금, 주문에 대한 비용 청구 등 기능
- 사용자 role 은 한 가지로 제한
  - 판매자, 배달 기사, 사용자 등의 구분이 필요할 것 같지만 논외로 한다

-------------------------

** 회고**
- builder 사용 시 생성자를 잘 확인할 것
- 컨트롤러 단 dto 와 도메인 단 dto 네이밍에 대해 정리가 필요할 거 같다
- 배달이 메인이어야 할 거 같은데, 주문에 생각보다 많은 제약조건이 걸렸다.
  - 주문자 정보가 Order 에 있는 점..
  - 배달에 대한 도메인이 중심이라면, 어떤 주문인, 어떤 아이템을 주문했는지 등에 관계 없이 수령자, 배달기사, 배달지 정보를 주요정보로 가져야하지 않을까?
  - 수령자도 주문자와 동일하지 않게 작성해야할 것 같다
  - 주문자나 수령자에 대한 정보가 좀 더 상세히 들어가야 한다
 - WebTestClient 사용에 대해 조금 더 생각해볼 필요가 있다
  - 전체 테스트를 위해 WebTestClient 를 사용했지만, 비즈니스 로직 테스트코드를 따로 작성할 것이라면 컨트롤러 단 테스트는 WebMvcTest 를 써도 좋았을텐데(속도측에서)
  
  
